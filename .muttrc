#source /etc/Muttrc.gpg.dist

set mbox_type=Maildir
set folder=/mnt/Docs/Mail/inbox
set mbox=+mbox
set spoolfile=+
set postponed=+drafts
set header_cache=/mnt/Docs/Mail/.hcache
set sendmail="/usr/bin/msmtp"
set signature="~/.signature"
#set from=magnus@trapd00r.se
set from="Magnus Woldrich"
set query_command = "abook --mutt-query '%s'"
set sort=threads
mailboxes +inbox
macro generic,index,pager A "<shell-escape>abook<return>" "launch abook"
macro index,pager a "<pipe-message>abook --add-email<return>" "add the sender address to abook"

hdr_order From: Reply-To: Date: To: Cc: Subject: User-Agent:
set editor="vim +':set textwidth=77' +':set wrap :set ft=perl' +\`awk '/^$/ {print i+2; exit} {i++}' %s\` %s"
mailboxes `echo /mnt/Docs/Mail/inbox/*`

macro index .. "c=\n" "Go to inbox"


# general-doesn't-fit stuff
color normal  default  default
color error   red      default
color markers blue     default
color tilde   color142 default
color status  black    default

color tree      color85     default
mono  indicator bold
color indicator color85     default
color index     color100     default  ~l      # Mailing list
color index     color197     default  ~N      # New
color index     color86      default  ~O      # Old
color index     magenta      default  "! ~C ." # No To: or Cc: (newsdeliver)
color index     color100     default  ~T      # Tagged
color index     white        default    ~F      # Flagged (important)
color index     color87      default  ~D      # Deleted
#
#
## header stuff
color header     color197 color233 "^Subject"
color header     color184 color233 "^From"
color header     color186 color233 "^To"
color header     color252 color233 "^User-Agent"
color header     color250 color233 "^X-.+"
color hdrdefault color242 color233
#
### gpg stuff
##color body color34 color233 "^gpg: Good signature.*"
##color body color193 color124 "^gpg: BAD signature.*"
##color body color142 color233 "^gpg: Can't check signature.*"
##color body color142 color233 "^-----BEGIN PGP SIGNED MESSAGE-----"
##color body color142 color233 "^-----BEGIN PGP SIGNATURE-----"
##color body color142 color233 "^-----END PGP SIGNED MESSAGE-----"
##color body color142 color233 "^-----END PGP SIGNATURE-----"
##color body color142 color233 "^Version: GnuPG.*"
##color body color142 color233 "^Comment: .*"
#
#
## misc body stuff
color attachment color86 color233
color signature color196 color233



# quote levels
color quoted  color86 color233
color quoted1 color87 color233
color quoted2 color88 color233
color quoted3 color88 color233
color quoted4 color88 color233
color quoted5 color88 color233
color quoted6 color88 color233
color quoted7 color88 color233
color quoted8 color88 color233
color quoted9 color88 color233
#color quoted3 color240 color233
#color quoted4 color239 color233
#color quoted5 color238 color233
#color quoted6 color239 color233
#color quoted7 color240 color233
#color quoted8 color241 color233
#color quoted9 color242 color233

color body      brightwhite     black "[;:]-[)/(|]"

set move=no
bind pager k previous-line
bind pager < previous-line
bind pager j next-line
bind pager > next-line
bind pager down next-page
bind pager up previous-page
# dual window view in mutt
set pager_index_lines=5

# Similar settings for the index
bind index [ previous-line
bind index ] next-line

set index_format = "%Z %4D %40.40s▕▏ %n"
#set index_format   = "%4C %Z %{%b %d} %-15.15F (%4l) %s"
set forward_format="Fw: %s"     # subject in forwarded messages
set date_format="%Y-%m-%d %H:%M"
set quote_regexp="^([A-Za-z ]+>|[]%>:|}-][]>:|}-]*)"
#set reply_regexp="^(re([\\[0-9\\]+])*|aw):[ \t]*"
set reply_regexp='^((re(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*'
set edit_headers
set text_flowed
set record="=sent-mail"
set reply_to=yes
set mbox="=received"

folder-hook . "push \"l!(~s 'FOLDER INTERNAL DATA')\n*\""

# Ignore all headers
 ignore *

## Then un-ignore the ones I want to see
 unignore From:
 unignore To:
 unignore Reply-To:
# unignore Mail-Followup-To:
 unignore Subject:
 unignore Date:
# unignore Organization:
# unignore Newsgroups:
 unignore CC:
 unignore BCC:
# unignore Message-ID:
 unignore X-Mailer:
 unignore User-Agent:
# unignore X-Junked-Because:
# unignore X-SpamProbe:
# unignore X-Virus-hagbard:

#set sidebar_visible=no
#set sidebar_width=30
#set sidebar_delim='▕▏'
## color of folders with new mail
#color sidebar_new brightblue default
#bind index <esc>k sidebar-prev
#bind index <esc>j sidebar-next
#bind index <esc>l sidebar-open
#
#message-hook ~A 'unset sidebar_visible; exec refresh'
#macro pager q "<exit><enter-command>set sidebar_visible<return><refresh>"


macro index .n "<tag-pattern>~N<enter><tag-prefix><clear-flag>N<clear-flag>" "Catchup all new messages" 

